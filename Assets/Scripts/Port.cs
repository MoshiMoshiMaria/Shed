using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Port : MonoBehaviour
{
    public Port(SignalComp owner, bool outputPort)
    {
        sc_owner = owner;
        b_isOutputPort = outputPort;

        b_inUse = false;
        p_connectedPort = null;
        i_valueInPort = 0;
    }
    [SerializeField]
    public SignalComp sc_owner;//Signal comp the port belongs to
    [SerializeField]
    public bool b_inUse;//Is the port in use?
    //[HideInInspector]
    public Port p_connectedPort;//If in use, which port is it connected to

    [SerializeField]
    bool b_isOutputPort;//Is the port holding a components output?
    //[HideInInspector]
    public int i_valueInPort;//Value currently in the port

    [SerializeField]
    Material mat_unselected;
    [SerializeField]
    Material mat_selected;

    public int GetConnectedValue()
    {
        if (b_inUse && !b_isOutputPort)
        {
            return p_connectedPort.i_valueInPort;
        }
        return 0;
    }

    /// This function will only work on output ports.
    /// This function is primarily for use by signal components during the output third of their update cycle.
    /// Feel free to use it, but only for output ports.
    /// Input ports will automatically get their values from the output port they are connected to.
    public void SetConnectedValue(int value)
    {
        if (b_isOutputPort)
        {
            i_valueInPort = value;
        }
    }

    public void ConnectToPort(Port port)
    {
        p_connectedPort = port;
        b_inUse = true;
    }

    public void DisconnectPort()
    {
        if(p_connectedPort != null)
        {
            p_connectedPort = null;
            b_inUse = false;
            if(!b_isOutputPort) i_valueInPort = 0;
        }
    }

   // public void SelectPort()
   // {
   //     
   // }
   //
   // public void DeselectPort()
   // {
   //     
   // }
}
